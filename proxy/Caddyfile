# Hephaestus Homelab - Secure Caddy Configuration
# All services protected with basic authentication

# Global configuration
{
    admin off
    auto_https off
    http_port 80
}

# Portainer - Docker management
:80 {
    # Basic authentication for all services
    basic_auth {
        admin $2a$14$UjGJMl2JVJxMzuczdbLGduQP4PFH8JulwH7CJXGHzpxE70f7N/xlu
    }
    
    # Route to Portainer by default
    reverse_proxy portainer:9000
    
    # Logging
    log {
        output file /data/logs/portainer.log {
            roll_size 10mb
            roll_keep 5
        }
    }
}

# Alternative: If you want separate subdomains for each service
# (Uncomment and configure Cloudflare routes if needed)

# portainer.hephaestus.chrislawrence.ca {
#     basic_auth {
#         admin $2a$14$CwYPyc/eyU1IQSZvLGya3u5yAw6W7R5xI6K1P3D5z8H9J2L4M6N8P0
#     }
#     reverse_proxy portainer:9000
# }

# grafana.hephaestus.chrislawrence.ca {
#     basic_auth {
#         admin $2a$14$CwYPyc/eyU1IQSZvLGya3u5yAw6W7R5xI6K1P3D5z8H9J2L4M6N8P0
#     }
#     reverse_proxy grafana:3000
# }

# uptime.hephaestus.chrislawrence.ca {
#     basic_auth {
#         admin $2a$14$CwYPyc/eyU1IQSZvLGya3u5yAw6W7R5xI6K1P3D5z8H9J2L4M6N8P0
#     }
#     reverse_proxy uptime-kuma:3001
# }

# prometheus.hephaestus.chrislawrence.ca {
#     basic_auth {
#         admin $2a$14$CwYPyc/eyU1IQSZvLGya3u5yAw6W7R5xI6K1P3D5z8H9J2L4M6N8P0
#     }
#     reverse_proxy prometheus:9090
# }

# cadvisor.hephaestus.chrislawrence.ca {
#     basic_auth {
#         admin $2a$14$CwYPyc/eyU1IQSZvLGya3u5yAw6W7R5xI6K1P3D5z8H9J2L4M6N8P0
#     }
#     reverse_proxy cadvisor:8080
# }

# glances.hephaestus.chrislawrence.ca {
#     basic_auth {
#         admin $2a$14$CwYPyc/eyU1IQSZvLGya3u5yAw6W7R5xI6K1P3D5z8H9J2L4M6N8P0
#     }
#     reverse_proxy glances:61208
# }
